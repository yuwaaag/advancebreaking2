<!DOCTYPE html>

<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breaking News - With Images</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

```
    body, html { 
        width: 1920px; 
        height: 1080px; 
        overflow: hidden; 
        background: transparent; 
        font-family: 'Arial Black', 'Impact', sans-serif; 
    }

    .breaking-container {
        width: 100%; 
        height: 100%;
        background: radial-gradient(circle at center, #ff0000 0%, #8b0000 50%, #330000 100%);
        display: flex; 
        flex-direction: column; 
        justify-content: center; 
        align-items: center;
        border: 15px solid #ffcc00; 
        position: relative;
        animation: pulse-bg 2s infinite alternate;
    }

    @keyframes pulse-bg {
        0% { 
            box-shadow: inset 0 0 100px rgba(0,0,0,0.8), 0 0 50px rgba(255,204,0,0.5); 
        }
        100% { 
            box-shadow: inset 0 0 200px rgba(0,0,0,0.9), 0 0 80px rgba(255,204,0,0.8); 
        }
    }

    /* Animated Background Elements */
    .bg-particles {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        background: rgba(255, 204, 0, 0.3);
        border-radius: 50%;
        animation: float 8s infinite ease-in-out;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
        50% { opacity: 1; }
    }

    .flash-tag {
        background: linear-gradient(135deg, #ffcc00 0%, #ff9900 100%);
        color: black; 
        padding: 20px 60px;
        font-size: 45px; 
        position: absolute; 
        top: 60px; 
        left: 0;
        font-weight: 900; 
        box-shadow: 8px 8px 20px rgba(0,0,0,0.6);
        border-right: 8px solid #cc0000;
        animation: slideInLeft 1s ease-out, glow-flash 1.5s infinite;
        z-index: 10;
    }

    @keyframes slideInLeft {
        from { transform: translateX(-100%); }
        to { transform: translateX(0); }
    }

    @keyframes glow-flash {
        0%, 100% { box-shadow: 8px 8px 20px rgba(0,0,0,0.6); }
        50% { box-shadow: 8px 8px 40px rgba(255,204,0,1), 0 0 30px rgba(255,204,0,0.8); }
    }

    .header {
        font-size: 140px; 
        color: #fff; 
        text-shadow: 
            5px 5px 20px #000,
            0 0 40px #ff0000,
            0 0 60px #ff0000;
        letter-spacing: 15px; 
        margin-bottom: 60px;
        animation: bounceIn 1.2s infinite alternate, textGlow 2s infinite;
        position: relative;
        z-index: 5;
    }

    @keyframes bounceIn {
        from { transform: scale(0.92); }
        to { transform: scale(1.05); }
    }

    @keyframes textGlow {
        0%, 100% { text-shadow: 5px 5px 20px #000, 0 0 40px #ff0000; }
        50% { text-shadow: 5px 5px 30px #000, 0 0 80px #ff0000, 0 0 100px #ffcc00; }
    }

    /* NEWS BOX WITH IMAGE LAYOUT */
    .news-box {
        width: 85%; 
        background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
        padding: 40px;
        border-radius: 25px; 
        box-shadow: 
            0 25px 60px rgba(0,0,0,0.9),
            inset 0 -10px 30px rgba(0,0,0,0.1);
        transform: skewX(-2deg); 
        border-left: 30px solid #ffcc00;
        border-right: 5px solid #cc0000;
        min-height: 400px; 
        display: flex; 
        align-items: center; 
        justify-content: space-between;
        gap: 40px;
        position: relative;
        z-index: 5;
        animation: newsBoxEntry 0.8s ease-out;
    }

    @keyframes newsBoxEntry {
        from { 
            opacity: 0; 
            transform: skewX(-2deg) translateY(50px) scale(0.9); 
        }
        to { 
            opacity: 1; 
            transform: skewX(-2deg) translateY(0) scale(1); 
        }
    }

    /* IMAGE CONTAINER */
    .news-image-container {
        flex: 0 0 500px;
        height: 350px;
        position: relative;
        overflow: hidden;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        border: 5px solid #ffcc00;
        animation: imageSlideIn 0.8s ease-out;
    }

    @keyframes imageSlideIn {
        from { 
            opacity: 0; 
            transform: translateX(-50px) scale(0.9); 
        }
        to { 
            opacity: 1; 
            transform: translateX(0) scale(1); 
        }
    }

    .news-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .news-image:hover {
        transform: scale(1.05);
    }

    .image-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
        pointer-events: none;
    }

    .no-image-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        color: white;
    }

    /* TEXT CONTAINER */
    .news-text-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 20px;
    }

    .news-text {
        font-size: 58px; 
        color: #cc0000; 
        text-align: left;
        margin: 0; 
        line-height: 1.3; 
        font-weight: 900;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        animation: textFadeIn 0.6s ease-out;
    }

    @keyframes textFadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .news-source {
        font-size: 24px;
        color: #666;
        margin-top: 15px;
        font-style: italic;
        font-weight: normal;
        font-family: Arial, sans-serif;
    }

    /* Live Indicator */
    .live-indicator {
        position: absolute;
        top: 40px;
        right: 60px;
        background: #ff0000;
        color: white;
        padding: 15px 35px;
        border-radius: 50px;
        font-size: 32px;
        font-weight: bold;
        box-shadow: 0 5px 20px rgba(255,0,0,0.6);
        animation: livePulse 1.5s infinite;
        z-index: 10;
    }

    @keyframes livePulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.1); opacity: 0.8; }
    }

    .live-dot {
        display: inline-block;
        width: 15px;
        height: 15px;
        background: white;
        border-radius: 50%;
        margin-right: 10px;
        animation: blink 1s infinite;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }

    /* Progress Bar */
    .progress-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 8px;
        background: #ffcc00;
        box-shadow: 0 0 15px rgba(255,204,0,0.8);
        animation: progress 15s linear;
        z-index: 10;
    }

    @keyframes progress {
        from { width: 0%; }
        to { width: 100%; }
    }

    /* Start Button */
    .start-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.95);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        cursor: pointer;
    }

    .start-button {
        background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
        color: white;
        border: 5px solid #ffcc00;
        padding: 40px 100px;
        font-size: 60px;
        font-weight: bold;
        border-radius: 20px;
        cursor: pointer;
        box-shadow: 0 10px 40px rgba(255,0,0,0.6);
        animation: buttonPulse 1.5s infinite;
        transition: all 0.3s;
    }

    .start-button:hover {
        transform: scale(1.1);
        box-shadow: 0 15px 60px rgba(255,0,0,1);
    }

    @keyframes buttonPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    .start-text {
        color: #ffcc00;
        font-size: 35px;
        margin-top: 30px;
        animation: fadeInOut 2s infinite;
    }

    @keyframes fadeInOut {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }

    /* Sound Icon */
    .sound-indicator {
        position: absolute;
        bottom: 40px;
        right: 40px;
        font-size: 40px;
        color: #ffcc00;
        animation: soundWave 1s infinite;
        z-index: 10;
    }

    @keyframes soundWave {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
    }

    /* Loading Spinner for Images */
    .image-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 60px;
        height: 60px;
        border: 6px solid #ffcc00;
        border-top: 6px solid transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
</style>
```

</head>
<body>

<div class="start-overlay" id="startOverlay">
    <div class="start-button">
        ‚ñ∂ START LIVE NEWS
    </div>
    <div class="start-text">‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è</div>
</div>

<div class="breaking-container">
    <div class="bg-particles" id="particles"></div>

```
<div class="live-indicator">
    <span class="live-dot"></span>LIVE
</div>

<div class="header">BREAKING NEWS</div>

<div class="news-box" id="newsBox">
    <!-- Image Container -->
    <div class="news-image-container" id="imageContainer">
        <div class="image-loading"></div>
        <img id="newsImage" class="news-image" alt="News Image" style="display: none;">
        <div class="image-overlay"></div>
    </div>
    
    <!-- Text Container -->
    <div class="news-text-container">
        <p class="news-text" id="headline">‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç...</p>
    </div>
</div>

<div class="progress-bar" id="progressBar"></div>

<div class="sound-indicator">üîä</div>
```

</div>

<!-- Audio Elements -->

<audio id="bgMusic" loop preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_d1718ab41b.mp3" type="audio/mpeg">
</audio>

<audio id="transitionSound" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_12b0c7443c.mp3" type="audio/mpeg">
</audio>

<audio id="startSound" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4e3b94ac8c.mp3" type="audio/mpeg">
</audio>

<script>
    let newsList = [];
    let currentIndex = 0;
    let isPlaying = false;
    
    const bgMusic = document.getElementById('bgMusic');
    const transitionSound = document.getElementById('transitionSound');
    const startSound = document.getElementById('startSound');
    const startOverlay = document.getElementById('startOverlay');
    const progressBar = document.getElementById('progressBar');
    const newsBox = document.getElementById('newsBox');
    const newsImage = document.getElementById('newsImage');
    const imageContainer = document.getElementById('imageContainer');

    // Set volumes
    bgMusic.volume = 0.3;
    transitionSound.volume = 0.6;
    startSound.volume = 0.5;

    // Create floating particles
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.width = Math.random() * 10 + 5 + 'px';
            particle.style.height = particle.style.width;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 8 + 's';
            particle.style.animationDuration = Math.random() * 5 + 5 + 's';
            particlesContainer.appendChild(particle);
        }
    }

    // Extract image from content or use thumbnail
    function extractImageFromNews(newsItem) {
        // Try to get image from enclosure (RSS standard)
        if (newsItem.enclosure && newsItem.enclosure.link) {
            return newsItem.enclosure.link;
        }
        
        // Try to get thumbnail
        if (newsItem.thumbnail) {
            return newsItem.thumbnail;
        }
        
        // Try to extract from content/description HTML
        if (newsItem.content || newsItem.description) {
            const content = newsItem.content || newsItem.description;
            const imgMatch = content.match(/<img[^>]+src="([^">]+)"/);
            if (imgMatch && imgMatch[1]) {
                return imgMatch[1];
            }
        }
        
        // Return null if no image found
        return null;
    }

    // Display news image with fallback
    function displayNewsImage(imageUrl) {
        const loadingSpinner = imageContainer.querySelector('.image-loading');
        const placeholder = imageContainer.querySelector('.no-image-placeholder');
        
        // Remove old placeholder if exists
        if (placeholder) {
            placeholder.remove();
        }
        
        if (imageUrl) {
            // Show loading spinner
            loadingSpinner.style.display = 'block';
            newsImage.style.display = 'none';
            
            // Load new image
            newsImage.onload = function() {
                loadingSpinner.style.display = 'none';
                newsImage.style.display = 'block';
                newsImage.style.animation = 'imageSlideIn 0.8s ease-out';
            };
            
            newsImage.onerror = function() {
                // If image fails to load, show placeholder
                loadingSpinner.style.display = 'none';
                showImagePlaceholder();
            };
            
            newsImage.src = imageUrl;
        } else {
            // No image available, show placeholder
            loadingSpinner.style.display = 'none';
            showImagePlaceholder();
        }
    }

    // Show placeholder when no image available
    function showImagePlaceholder() {
        newsImage.style.display = 'none';
        const placeholder = document.createElement('div');
        placeholder.className = 'no-image-placeholder';
        placeholder.innerHTML = 'üì∞';
        imageContainer.appendChild(placeholder);
    }

    // Fetch News from RSS
    async function fetchNews() {
        const rssUrl = "https://www.bhaskar.com/rss-v1--category-1061.xml";
        const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

        try {
            const response = await fetch(apiUrl);
            const data = await response.json();
            if (data.status === 'ok' && data.items.length > 0) {
                newsList = data.items;
                console.log('News loaded:', newsList.length, 'items');
                console.log('First item:', newsList[0]); // Debug
                if (!isPlaying) {
                    showNextNews();
                    isPlaying = true;
                }
            }
        } catch (e) {
            console.error("RSS Fetch Error:", e);
            // Fallback news with placeholder images
            newsList = [
                { 
                    title: "‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§®‡§à ‡§§‡§ï‡§®‡•Ä‡§ï ‡§ï‡§æ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§π‡•Å‡§Ü",
                    thumbnail: null
                },
                { 
                    title: "‡§ñ‡•á‡§≤ ‡§ú‡§ó‡§§ ‡§Æ‡•á‡§Ç ‡§¨‡§°‡§º‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø ‡§¶‡§∞‡•ç‡§ú",
                    thumbnail: null
                },
                { 
                    title: "‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§Æ‡•á‡§Ç ‡§§‡•á‡§ú‡•Ä ‡§¶‡•á‡§ñ‡•Ä ‡§ó‡§à",
                    thumbnail: null
                }
            ];
            if (!isPlaying) {
                showNextNews();
                isPlaying = true;
            }
        }
    }

    // Show Next News with Animation
    function showNextNews() {
        if (newsList.length === 0) return;

        const headlineElement = document.getElementById('headline');
        const currentNews = newsList[currentIndex];
        const currentTitle = currentNews.title;
        const imageUrl = extractImageFromNews(currentNews);

        console.log('Showing news:', currentTitle);
        console.log('Image URL:', imageUrl); // Debug

        // Play transition sound
        playTransitionSound();

        // Animate news box
        newsBox.style.animation = 'none';
        setTimeout(() => {
            newsBox.style.animation = 'newsBoxEntry 0.8s ease-out';
        }, 10);

        // Display image
        displayNewsImage(imageUrl);

        // Animate headline text
        headlineElement.style.animation = 'none';
        setTimeout(() => {
            headlineElement.innerText = currentTitle;
            headlineElement.style.animation = 'textFadeIn 0.6s ease-out';
        }, 300);

        // Reset and animate progress bar
        progressBar.style.animation = 'none';
        setTimeout(() => {
            progressBar.style.animation = 'progress 15s linear';
        }, 10);

        // Text-to-Speech
        speakNews(currentTitle);

        // Move to next
        currentIndex = (currentIndex + 1) % newsList.length;

        // Schedule next news
        setTimeout(showNextNews, 15000);
    }

    // Play Transition Sound
    function playTransitionSound() {
        transitionSound.currentTime = 0;
        transitionSound.play().catch(e => console.log("Transition sound error:", e));
    }

    // Text-to-Speech
    function speakNews(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance();
            msg.text = "‡§¨‡•ç‡§∞‡•á‡§ï‡§ø‡§Ç‡§ó ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º... " + text;
            msg.lang = 'hi-IN';
            msg.rate = 0.85;
            msg.pitch = 1;
            msg.volume = 0.9;
            
            setTimeout(() => {
                window.speechSynthesis.speak(msg);
            }, 800);
        }
    }

    // Start Everything
    startOverlay.onclick = async () => {
        // Play start sound
        startSound.play().catch(e => console.log("Start sound error:", e));
        
        // Start background music
        bgMusic.play().catch(e => console.log("BG music error:", e));
        
        // Create particles
        createParticles();
        
        // Fetch and show news
        await fetchNews();
        
        // Hide overlay
        startOverlay.style.opacity = '0';
        setTimeout(() => {
            startOverlay.style.display = 'none';
        }, 500);
    };

    // Auto refresh news list every 10 minutes
    setInterval(fetchNews, 600000);

    // Handle visibility change
    document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
            bgMusic.pause();
        } else {
            bgMusic.play().catch(e => console.log("Resume error:", e));
        }
    });
</script>

</body>
</html>